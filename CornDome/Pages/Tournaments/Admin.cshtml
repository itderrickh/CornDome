@page
@model CornDome.Pages.Tournaments.AdminModel
@{
    ViewData["Title"] = "Admin Tournaments Home";
}

<div class="container my-3">
    @if (TempData["Message"] != null)
    {
        <div class="alert alert-@TempData["status"]">@TempData["Message"]</div>
    }

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="create-tab" data-bs-toggle="tab" data-bs-target="#create" type="button" role="tab" aria-controls="Create" aria-selected="false">Create</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="modify-tab" data-bs-toggle="tab" data-bs-target="#modify" type="button" role="tab" aria-controls="modify" aria-selected="false">Modify</button>
        </li>
    </ul>

    <div class="tab-content mt-3" id="myTabContent">
        <div class="tab-pane fade" id="create" role="tabpanel" aria-labelledby="create-tab">
            <h1>Create</h1>
            <form method="post" asp-page-handler="InsertTournament">
                <div class="form-group">
                    <label for="TournamentDate">Tournament Date</label>
                    <input asp-for="TournamentToInsert.TournamentDate" type="datetime-local" class="form-control" required />
                </div>

                <div class="form-group">
                    <label for="TournamentName">Tournament Name</label>
                    <input asp-for="TournamentToInsert.TournamentName" type="text" class="form-control" required />
                </div>

                <div class="form-group">
                    <label for="TournamentDescription">Tournament Description</label>
                    <textarea asp-for="TournamentToInsert.TournamentDescription" class="form-control" required></textarea>
                </div>

                <div class="form-group">
                    <input asp-for="TournamentToInsert.IsOpenList" type="checkbox" />
                    <label for="OpenList">Is Open List?</label>
                </div>

                <div class="form-group mt-3">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
        <div class="tab-pane fade show active" id="modify" role="tabpanel" aria-labelledby="modify-tab">
            <h1>Modify</h1>
            <table class="table table-light table-striped w-100">
                <thead class="thead-dark">
                    <tr>
                        <th>Tournament</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var tournament in Model.AllTournaments.OrderByDescending(x => x.TournamentDate))
                    {
                        <tr>
                            <td><a asp-page="View" asp-route-id="@tournament.Id">@tournament.TournamentName</a></td>
                            <td>@tournament.Status</td>
                            <td>@tournament.TournamentDate.ToShortDateString()</td>
                            <td><a asp-page="/Tournaments/Manage" asp-route-id="@tournament.Id">Manage</a></td>
                            <td><a asp-page="/Tournaments/Edit" asp-route-id="@tournament.Id">Edit</a></td>
                            <td><a asp-page="/Tournaments/Delete" asp-route-id="@tournament.Id">Delete</a></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
