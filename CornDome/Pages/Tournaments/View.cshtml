@page
@model CornDome.Pages.Tournaments.ViewModel
@{
    ViewData["Title"] = "View Tournament";
}


<div class="container">
    <h1>@Model.Tournament.TournamentName</h1>
    <p>@Model.Tournament.TournamentDate.ToShortDateString()</p>
    <p>@Model.Tournament.TournamentDescription</p>

    <h3>Registrations</h3>
    @if (Model.RegisteredUsers.Any())
    {
        <table class="table table-light">
            <thead>
                <tr>
                    <th>Participant</th>
                    <th>Deck</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model.RegisteredUsers)
                {
                    <tr>
                        <td>@user.User.UserName</td>
                        @if (Model.Tournament.Status == TournamentStatus.Completed || User.IsInRole("Admin"))
                        {
                            <td><a asp-page="/Deck" asp-route-deck="@user.Deck" target="_blank">Link</a></td>
                        }
                        else
                        {
                            <td>Decklist will be available after the tournament</td>   
                        }
                    </tr>
                }

            </tbody>
        </table>
    }
    else
    {
        <p>Nobody has signed up yet.</p>
    }

</div>